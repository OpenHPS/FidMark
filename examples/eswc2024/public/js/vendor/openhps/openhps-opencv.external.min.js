!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("cv"),require("@openhps/core")):"function"==typeof define&&define.amd?define("OpenHPS",["cv","core"],t):"object"==typeof exports?exports.OpenHPS=t(require("cv"),require("@openhps/core")):(e.OpenHPS=e.OpenHPS||{},e.OpenHPS.opencv=t(e.cv,e.OpenHPS.core))}("undefined"!=typeof self?self:this,((e,t)=>(()=>{var r={869:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageFeatureObject=void 0;const o=r(655),i=r(0),s=r(958);let a=class ImageFeatureObject extends i.DataObject{constructor(){super(...arguments),this._containedFeatures=new Array}get confidence(){return this._confidence}set confidence(e){this._confidence=e}get shape(){return this._shape}set shape(e){this._shape=e}};t.ImageFeatureObject=a,o.__decorate([(0,i.SerializableArrayMember)(a),o.__metadata("design:type",Array)],a.prototype,"_containedFeatures",void 0),o.__decorate([(0,i.SerializableMember)(),o.__metadata("design:type",Number),o.__metadata("design:paramtypes",[Number])],a.prototype,"confidence",null),o.__decorate([(0,i.SerializableMember)(),o.__metadata("design:type",s.ImageRectShape),o.__metadata("design:paramtypes",[s.ImageRectShape])],a.prototype,"shape",null),t.ImageFeatureObject=a=o.__decorate([(0,i.SerializableObject)()],a)},958:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageRectShape=void 0;const o=r(655),i=r(70),s=r(0);let a=class ImageRectShape extends i.Rect{constructor(e){super(e.x,e.y,e.width,e.height)}get center(){return null}get squareSize(){return this.width*this.height}};t.ImageRectShape=a,t.ImageRectShape=a=o.__decorate([(0,s.SerializableObject)(),o.__metadata("design:paramtypes",[i.Rect])],a)},972:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r(655);o.__exportStar(r(869),t),o.__exportStar(r(958),t)},46:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpenCV=void 0;const o=r(655),i=r(70),s=r(174),a=r(0);function n(){a.DataSerializer.registerType(i.Mat,{serializer:e=>{if(e)return(0,i.imencode)(".jpg",e)},deserializer:e=>{if(e)return(0,i.imdecode)(e)}})}"object"==typeof window?s.onRuntimeInitialized=()=>{n()}:n(),o.__exportStar(r(972),t),o.__exportStar(r(375),t),t.OpenCV=r(70)},476:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r(655);o.__exportStar(r(46),t),o.__exportStar(r(326),t)},326:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r(655);o.__exportStar(r(312),t),o.__exportStar(r(48),t)},794:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageDisplaySink=void 0;const o=r(0),i=r(70);class ImageDisplaySink extends o.SinkNode{constructor(e){super(e),this.options.windowTitle=this.options.windowTitle||"Debug"}onPush(e){return new Promise((t=>{(0,i.imshow)(this.options.windowTitle,e.image),this.options.waitKey&&(0,i.waitKey)(1),t()}))}}t.ImageDisplaySink=ImageDisplaySink},48:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});r(655).__exportStar(r(794),t)},410:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractVideoSource=void 0;const o=r(0),i=r(375),s=r(70);class AbstractVideoSource extends o.SourceNode{constructor(e){super(e),this.frame=0,this.once("build",this.onBuild.bind(this)),this.once("destroy",this.stop.bind(this))}onBuild(){this.options.videoSource&&this.load(this.options.videoSource),this.options.autoPlay&&this.play()}load(e){return this.videoCapture=new s.VideoCapture(e),this.srcFPS=this.videoCapture.get(s.CAP_PROP_FPS),this.options.fps=void 0===this.options.fps?this.srcFPS:this.options.fps,this.options.fourcc=this.videoCapture.get(s.CAP_PROP_FOURCC),this.totalFrames=this.videoCapture.get(s.CAP_PROP_FRAME_COUNT),void 0!==this.options.brightness&&this.videoCapture.set(s.CAP_PROP_BRIGHTNESS,this.options.brightness),void 0!==this.options.contrast&&this.videoCapture.set(s.CAP_PROP_CONTRAST,this.options.contrast),-1!==this.options.fps&&this.videoCapture.set(s.CAP_PROP_FPS,this.options.fps),this}reset(){this.frame=0,this.videoCapture.reset()}release(){this.videoCapture.release()}play(){let e=!0;return this.timer=setInterval((()=>{!e&&this.options.throttleRead||(e=!1,this._readFrame().then((t=>t?(this.options.throttlePush||(e=!0),this.push(t)):clearInterval(this.timer))).then((()=>{this.options.throttlePush&&(e=!0)})).catch((e=>{this.logger("error",{ex:e})})))}),-1===this.options.fps?0:1e3/this.options.fps),this.start=Date.now(),this.timer}stop(){this.timer&&clearInterval(this.timer)}get currentFrameCount(){return this.frame}get totalFrameCount(){return this.totalFrames}get actualFPS(){return Math.round(this.frame/((Date.now()-this.start)/1e3)*100)/100}onPull(){return this._readFrame()}_readFrame(){return new Promise(((e,t)=>{const r=new i.VideoFrame;r.source=this.source,r.fps=this.options.fps,this.readFrame().then((t=>{if(!t||t.empty)return e(void 0);this.frame++,r.phenomenonTimestamp=o.TimeUnit.SECOND.convert(this.frame*(1/r.fps),o.TimeService.getUnit()),r.rows=this.options.height||t.sizes[0],r.cols=this.options.width||t.sizes[1],r.image=t,r.fourcc=this.options.fourcc,e(r)})).catch(t)}))}}t.AbstractVideoSource=AbstractVideoSource},312:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});r(655).__exportStar(r(410),t)},915:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});r(655).__exportStar(r(901),t)},901:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r(655);o.__exportStar(r(476),t),o.__exportStar(r(797),t)},797:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});r(655).__exportStar(r(842),t)},842:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r(655);o.__exportStar(r(130),t),o.__exportStar(r(593),t),o.__exportStar(r(93),t)},899:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraCalibrationNode=void 0;const o=r(0),i=r(70);class CameraCalibrationNode extends o.ProcessingNode{constructor(e){super(e)}process(e){return new Promise(((t,r)=>{const s=new i.Size(this.options.boardSize[0],this.options.boardSize[1]),a=new i.TermCriteria(i.termCriteria.EPS|i.termCriteria.MAX_ITER,30,.001),n=[];for(let e=0;e<s.width;e++)for(let t=0;t<s.height;t++)n.push([t,e,0]);let c;const u=e.image.bgrToGray();let d;this.getNodeData(e.source,{objectPoints:[],imagePoints:[]}).then((e=>(c=e,u.findChessboardCornersAsync(s,i.CALIB_CB_ADAPTIVE_THRESH|i.CALIB_CB_FAST_CHECK|i.CALIB_CB_NORMALIZE_IMAGE)))).then((r=>{if(r.returnValue)return u.cornerSubPixAsync(r.corners,new i.Size(4,4),new i.Size(0,0),a);t(e)})).then((o=>{if(c.imagePoints.push(o.map((e=>[e.x,e.y]))),c.objectPoints.push(n),this.options.drawChessboardCorners&&e.image.drawChessboardCorners(s,o,!0),c.imagePoints.length>=this.options.minFrames){const t=c.objectPoints.map((e=>e.map((e=>new i.Point3(e[0],e[1],e[2]))))),r=c.imagePoints.map((e=>e.map((e=>new i.Point2(e[0],e[1])))));return d=(0,i.initCameraMatrix2D)(t,r,new i.Size(e.image.cols,e.image.rows)),(0,i.calibrateCameraAsync)(t,r,new i.Size(e.image.cols,e.image.rows),d,[],i.CALIB_USE_INTRINSIC_GUESS,a)}this.setNodeData(e.source,c).then((()=>{t(e)})).catch(r)})).then((i=>{if(!i)return t(e);e.source.distortionCoefficients=i.distCoeffs,e.source.cameraMatrix=o.Matrix3.fromArray(d.getDataAsArray()),c.imagePoints=[],c.objectPoints=[],this.setNodeData(e.source,c).then((()=>{t(e)})).catch(r)})).catch(r)}))}}t.CameraCalibrationNode=CameraCalibrationNode},480:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorMaskNode=void 0;const o=r(476),i=r(438);class ColorMaskNode extends i.ImageProcessingNode{constructor(e){super(e)}processImage(e){return new Promise((t=>{let r=e.cvtColor(o.OpenCV.COLOR_BGR2HSV);r=r.inRange(new o.OpenCV.Vec3(this.options.minRange[0],this.options.minRange[1],this.options.minRange[2]),new o.OpenCV.Vec3(this.options.maxRange[0],this.options.maxRange[1],this.options.maxRange[2])),t(r)}))}}t.ColorMaskNode=ColorMaskNode},296:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DisparityProcessingNode=void 0;const o=r(0),i=r(476);class DisparityProcessingNode extends o.ProcessingNode{process(e){return new Promise((t=>{const r=new i.ImageFrame;r.source=new i.StereoCameraObject(void 0,void 0,e.left.source,e.right.source),t(r)}))}}t.DisparityProcessingNode=DisparityProcessingNode},332:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GaussianBlurNode=void 0;const o=r(476),i=r(438);class GaussianBlurNode extends i.ImageProcessingNode{constructor(e){super(e)}processImage(e){return new Promise(((t,r)=>{e.gaussianBlurAsync(new o.OpenCV.Size(this.options.kernelSize,this.options.kernelSize),0).then((e=>{t(e)})).catch(r)}))}}t.GaussianBlurNode=GaussianBlurNode},825:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageDilateNode=void 0;const o=r(476),i=r(438);class ImageDilateNode extends i.ImageProcessingNode{constructor(e){super(e)}processImage(e){return new Promise((t=>{t(e.dilate(new o.OpenCV.Mat,new o.OpenCV.Point2(0,0),this.options.iterations?this.options.iterations:1))}))}}t.ImageDilateNode=ImageDilateNode},571:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageErodeNode=void 0;const o=r(476),i=r(438);class ImageErodeNode extends i.ImageProcessingNode{constructor(e){super(e)}processImage(e){return new Promise((t=>{t(e.erode(new o.OpenCV.Mat,new o.OpenCV.Point2(0,0),this.options.iterations?this.options.iterations:1))}))}}t.ImageErodeNode=ImageErodeNode},438:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageProcessingNode=void 0;const o=r(0);class ImageProcessingNode extends o.ProcessingNode{constructor(e){super(e)}process(e){return new Promise(((t,r)=>{e.image?this.processImage(e.image,e).then((r=>{e.image=r,t(e)})).catch(r):t(e)}))}}t.ImageProcessingNode=ImageProcessingNode},583:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageResizeNode=void 0;const o=r(70),i=r(438);class ImageResizeNode extends i.ImageProcessingNode{constructor(e){super(e)}processImage(e){return new Promise((t=>{let r=1;this.options.width?r=this.options.width/e.sizes[1]:this.options.height&&(r=this.options.height/e.sizes[0]);t(e.resize(Math.round(e.sizes[0]*r),Math.round(e.sizes[1]*r),this.options.fx?this.options.fx:2,this.options.fy?this.options.fy:2,this.options.interpolation?this.options.interpolation:o.INTER_CUBIC))}))}}t.ImageResizeNode=ImageResizeNode},613:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageRotation=t.ImageRotationNode=void 0;const o=r(70),i=r(438);class ImageRotationNode extends i.ImageProcessingNode{constructor(e){super(e)}processImage(e){return new Promise(((t,r)=>{e.rotateAsync(this.options.rotationCode).then((e=>{t(e)})).catch(r)}))}}t.ImageRotationNode=ImageRotationNode;class ImageRotation{}t.ImageRotation=ImageRotation,ImageRotation.ROTATION_90_CLOCKWISE=o.ROTATE_90_CLOCKWISE,ImageRotation.ROTATE_90_COUNTERCLOCKWISE=o.ROTATE_90_COUNTERCLOCKWISE,ImageRotation.ROTATE_180=o.ROTATE_180},981:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageTransformNode=void 0;const o=r(70),i=r(70),s=r(438);class ImageTransformNode extends s.ImageProcessingNode{constructor(e){super(e)}processImage(e){return new Promise(((t,r)=>{const s=this.options.src[0],a=this.options.src[1],n=this.options.src[2],c=this.options.src[3],u=Math.sqrt(Math.pow(n.x-c.x,2)+Math.pow(n.y-c.y,2)),d=Math.sqrt(Math.pow(a.x-s.x,2)+Math.pow(a.y-s.y,2)),l=this.options.width||Math.max(u,d),p=Math.sqrt(Math.pow(a.x-n.x,2)+Math.pow(a.y-n.y,2)),_=Math.sqrt(Math.pow(s.x-c.x,2)+Math.pow(s.y-c.y,2)),h=this.options.height||Math.max(p,_),m=this.options.dst||[new o.Point2(0,0),new o.Point2(l-1,0),new o.Point2(l-1,h-1),new o.Point2(0,h-1)],f=i.getPerspectiveTransform(this.options.src,m);e.warpPerspectiveAsync(f,new o.Size(l,h)).then((e=>{t(e)})).catch(r)}))}}t.ImageTransformNode=ImageTransformNode},711:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StereoCameraCalibrationNode=void 0;const o=r(0),i=r(476),s=r(70);class StereoCameraCalibrationNode extends o.ProcessingNode{process(e){return new Promise(((t,r)=>{const o=new s.Size(8,6),a=[];a.push(e.left.image.findChessboardCornersAsync(o,s.CALIB_CB_ADAPTIVE_THRESH|s.CALIB_CB_FAST_CHECK|s.CALIB_CB_NORMALIZE_IMAGE)),a.push(e.right.image.findChessboardCornersAsync(o,s.CALIB_CB_ADAPTIVE_THRESH|s.CALIB_CB_FAST_CHECK|s.CALIB_CB_NORMALIZE_IMAGE)),Promise.all(a).then((s=>{if(s[0].returnValue&&s[1].returnValue){const a=new i.StereoImageFrame;a.source=e.source,a.left=e.left,a.right=e.right;const n=[];n.push(a.left.image.drawChessboardCornersAsync(o,s[0].corners,!0)),n.push(a.right.image.drawChessboardCornersAsync(o,s[1].corners,!0)),Promise.all(n).then((()=>{t(a)})).catch(r)}else t(void 0)}))}))}}t.StereoCameraCalibrationNode=StereoCameraCalibrationNode},69:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EyeDetectionNode=void 0;const o=r(676),i=r(70),s=r(476);class EyeDetectionNode extends o.ImageObjectClassifierNode{constructor(){super(new i.CascadeClassifier(i.HAAR_EYE),s.ImageFeatureObject,2)}process(e){return new Promise(((t,r)=>{let o=!1;e.getObjects(s.ImageFeatureObject).forEach((()=>{o=!0})),o?super.process(e).then((e=>{t(e)})).catch((e=>{r(e)})):t(e)}))}}t.EyeDetectionNode=EyeDetectionNode},380:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FaceDetectionNode=void 0;const o=r(676),i=r(70),s=r(476);class FaceDetectionNode extends o.ImageObjectClassifierNode{constructor(){if(!(i.CascadeClassifier instanceof Function))throw new Error("Cascade classifiers not included in OpenCV!");super(new i.CascadeClassifier(i.HAAR_FRONTALFACE_DEFAULT),s.ImageFeatureObject,1)}}t.FaceDetectionNode=FaceDetectionNode},676:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageObjectClassifierNode=void 0;const o=r(0),i=r(476);class ImageObjectClassifierNode extends o.ProcessingNode{constructor(e,t,r=-1){super(),this._classifier=e,this._imageObjectType=t,this._maxResults=r}_sortByNumDetections(e){return e.numDetections.map(((e,t)=>({num:e,idx:t}))).sort(((e,t)=>t.num-e.num)).map((({idx:e})=>e))}process(e){return new Promise((t=>{const r=this._classifier.detectMultiScaleGpu(e.image.bgrToGray());if(null!==r){const t=this._sortByNumDetections(r);for(let o=0;o<(-1!==this._maxResults?this._maxResults>r.objects.length?r.objects.length:this._maxResults:r.objects.length);o++){const s=r.objects[t[o]],a=r.numDetections[t[o]],n=new this._imageObjectType;n.shape=new i.ImageRectShape(s),n.confidence=a,e.addObject(n)}}t(e)}))}}t.ImageObjectClassifierNode=ImageObjectClassifierNode},126:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PupilDetectionNode=void 0;const o=r(676);class PupilDetectionNode extends o.ImageObjectClassifierNode{}t.PupilDetectionNode=PupilDetectionNode},515:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r(655);o.__exportStar(r(126),t),o.__exportStar(r(69),t),o.__exportStar(r(676),t),o.__exportStar(r(380),t)},593:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r(655);o.__exportStar(r(515),t),o.__exportStar(r(296),t),o.__exportStar(r(899),t),o.__exportStar(r(711),t),o.__exportStar(r(583),t),o.__exportStar(r(571),t),o.__exportStar(r(825),t),o.__exportStar(r(613),t),o.__exportStar(r(981),t),o.__exportStar(r(480),t),o.__exportStar(r(438),t),o.__exportStar(r(332),t)},139:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageSink=void 0;const o=r(0),i=r(70);class ImageSink extends o.SinkNode{constructor(e){super(e)}onPush(e){return new Promise(((t,r)=>{let o=this.options.filePath;o=o.replace(/{createdTimestamp}/gi,String(e.createdTimestamp)),(0,i.imwriteAsync)(o,e.image).then(t).catch(r)}))}}t.ImageSink=ImageSink},843:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoSink=void 0;const o=r(0),i=r(70),s=r(685);class VideoSink extends o.SinkNode{constructor(e){super(e),this.once("destroy",this._destroyWriter.bind(this))}get videoWriter(){return this._writer}_destroyWriter(){this._writer.release()}onPush(e){return new Promise(((t,r)=>{const o=this.options.width||e.cols,a=this.options.height||e.rows;this._writer||(s.existsSync(this.options.filePath)&&s.unlinkSync(this.options.filePath),this._writer=new i.VideoWriter(this.options.filePath,this.options.codec?i.VideoWriter.fourcc(this.options.codec):e.fourcc,this.options.fps||e.fps,new i.Size(o,a)));let n=e.image;n.sizes[0]===a&&n.sizes[1]===o||(n=n.resize(a,o)),this._writer.writeAsync(n).then(t).catch(r)}))}}t.VideoSink=VideoSink},93:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r(655);o.__exportStar(r(843),t),o.__exportStar(r(139),t)},331:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageSource=void 0;const o=r(0),i=r(375),s=r(70),a=r(148),n=r(761);class ImageSource extends o.SourceNode{get source(){return super.source}loadDirectory(e){return new Promise(((t,r)=>{a.readdir(e,((o,i)=>{if(o)return r(o);let s=Promise.resolve();for(let t=0;t<i.length;t++)s=s.then((()=>this.pushImage(n.join(e,i[t]))));s.then((()=>{t()})).catch(r)}))}))}pushImage(e){return new Promise(((t,r)=>{const o=new i.ImageFrame;o.source=this.source;const a=e instanceof s.Mat?e:(0,s.imread)(e);if(a.empty)return r(new Error);o.image=a,this.onceCompleted(o.uid).then((()=>{t()})).catch(r),this.push(o)}))}onPull(){return new Promise((e=>{e(void 0)}))}}t.ImageSource=ImageSource},110:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StereoVideoSource=void 0;const o=r(0),i=r(375),s=r(70);class StereoVideoSource extends o.SourceNode{constructor(e){super(e)}fromFiles(e,t){return this._leftVideoCapture=new s.VideoCapture(e),this._rightVideoCapture=new s.VideoCapture(t),this}fromPorts(e,t){return this._leftVideoCapture=new s.VideoCapture(e),this._rightVideoCapture=new s.VideoCapture(t),this}reset(){this._leftVideoCapture.reset(),this._rightVideoCapture.reset()}release(){this._leftVideoCapture.release(),this._rightVideoCapture.release()}play(){const e=setInterval((()=>{this._fetchFrame().then((t=>{if(!t)return clearInterval(e);this.push(t)}))}),50)}_fetchFrame(){return new Promise((e=>{const t=new i.StereoVideoFrame;t.source=this.source;const r=this._leftVideoCapture.read(),o=this._rightVideoCapture.read();if(r.empty||o.empty)return e(void 0);const s=new i.VideoFrame;s.rows=r.sizes[0],s.cols=r.sizes[1],s.image=r;const a=new i.VideoFrame;a.rows=o.sizes[0],a.cols=o.sizes[1],a.image=o,t.left=s,t.right=a,e(t)}))}onPull(){return this._fetchFrame()}}t.StereoVideoSource=StereoVideoSource},295:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoSource=void 0;const o=r(326);class VideoSource extends o.AbstractVideoSource{readFrame(){return this.videoCapture.readAsync()}}t.VideoSource=VideoSource},130:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r(655);o.__exportStar(r(295),t),o.__exportStar(r(331),t),o.__exportStar(r(110),t)},375:(e,t,r)=>{"use strict";r.r(t),r.d(t,{CameraObject:()=>s,ColorOrder:()=>a,DepthImageFrame:()=>_,DepthVideoFrame:()=>h,ImageFrame:()=>u,PerspectiveCameraObject:()=>n,StereoCameraObject:()=>c,StereoImageFrame:()=>l,StereoVideoFrame:()=>p,VideoFrame:()=>d});var o=r(655),i=r(0);let s=class CameraObject extends i.DataObject{constructor(e,t,r,o){super(e,t),this.colorOrder=a.RGB,this.width=r||0,this.height=o||0}get focalLength(){if(this.cameraMatrix)return[this.cameraMatrix.elements[0],this.cameraMatrix.elements[4]]}get principalPoint(){if(this.cameraMatrix)return[this.cameraMatrix.elements[6],this.cameraMatrix.elements[7]]}get aspect(){return this.width/this.height}get rows(){return this.height}set rows(e){this.height=e}get cols(){return this.width}set cols(e){this.width=e}};var a;(0,o.__decorate)([(0,i.SerializableMember)(),(0,o.__metadata)("design:type",Number)],s.prototype,"width",void 0),(0,o.__decorate)([(0,i.SerializableMember)(),(0,o.__metadata)("design:type",Number)],s.prototype,"height",void 0),(0,o.__decorate)([(0,i.SerializableArrayMember)(Number),(0,o.__metadata)("design:type",Array)],s.prototype,"distortionCoefficients",void 0),(0,o.__decorate)([(0,i.SerializableMember)(),(0,o.__metadata)("design:type",i.Matrix3)],s.prototype,"cameraMatrix",void 0),(0,o.__decorate)([(0,i.SerializableMember)(),(0,o.__metadata)("design:type",Number)],s.prototype,"fps",void 0),(0,o.__decorate)([(0,i.SerializableMember)(),(0,o.__metadata)("design:type",Number)],s.prototype,"colorOrder",void 0),s=(0,o.__decorate)([(0,i.SerializableObject)(),(0,o.__metadata)("design:paramtypes",[String,String,Number,Number])],s),function(e){e[e.RGB=0]="RGB",e[e.BGR=1]="BGR",e[e.GRAYSCALE=2]="GRAYSCALE"}(a||(a={}));let n=class PerspectiveCameraObject extends s{constructor(e,t,r,o,i=50,s=.1,a=2e3){super(e,t,r,o),this.fov=i,this.near=s,this.far=a}};(0,o.__decorate)([(0,i.SerializableMember)(),(0,o.__metadata)("design:type",Number)],n.prototype,"fov",void 0),(0,o.__decorate)([(0,i.SerializableMember)(),(0,o.__metadata)("design:type",Number)],n.prototype,"near",void 0),(0,o.__decorate)([(0,i.SerializableMember)(),(0,o.__metadata)("design:type",Number)],n.prototype,"far",void 0),n=(0,o.__decorate)([(0,i.SerializableObject)(),(0,o.__metadata)("design:paramtypes",[String,String,Number,Number,Object,Object,Object])],n);let c=class StereoCameraObject extends s{constructor(e,t,r,o){super(e,t),this.eyeSep=.064,this.cameraL=r,this.cameraR=o,void 0!==r&&void 0!==o&&(this.uid=r.uid+o.uid)}};(0,o.__decorate)([(0,i.SerializableMember)(),(0,o.__metadata)("design:type",n)],c.prototype,"cameraL",void 0),(0,o.__decorate)([(0,i.SerializableMember)(),(0,o.__metadata)("design:type",n)],c.prototype,"cameraR",void 0),(0,o.__decorate)([(0,i.SerializableMember)(),(0,o.__metadata)("design:type",Object)],c.prototype,"eyeSep",void 0),c=(0,o.__decorate)([(0,i.SerializableObject)(),(0,o.__metadata)("design:paramtypes",[String,String,n,n])],c);let u=class ImageFrame extends i.DataFrame{get rows(){return this.height}set rows(e){this.height=e}get cols(){return this.width}set cols(e){this.width=e}get source(){return super.source}set source(e){super.source=e}};(0,o.__decorate)([(0,i.SerializableMember)(),(0,o.__metadata)("design:type",Object)],u.prototype,"image",void 0),(0,o.__decorate)([(0,i.SerializableMember)(),(0,o.__metadata)("design:type",Number)],u.prototype,"height",void 0),(0,o.__decorate)([(0,i.SerializableMember)(),(0,o.__metadata)("design:type",Number)],u.prototype,"width",void 0),(0,o.__decorate)([(0,i.SerializableMember)(),(0,o.__metadata)("design:type",Number)],u.prototype,"fourcc",void 0),(0,o.__decorate)([(0,i.SerializableMember)(),(0,o.__metadata)("design:type",Number)],u.prototype,"fps",void 0),u=(0,o.__decorate)([(0,i.SerializableObject)()],u);let d=class VideoFrame extends u{};d=(0,o.__decorate)([(0,i.SerializableObject)()],d);let l=class StereoImageFrame extends i.DataFrame{get source(){return super.source}set source(e){super.source=e}};(0,o.__decorate)([(0,i.SerializableMember)(),(0,o.__metadata)("design:type",u)],l.prototype,"left",void 0),(0,o.__decorate)([(0,i.SerializableMember)(),(0,o.__metadata)("design:type",u)],l.prototype,"right",void 0),l=(0,o.__decorate)([(0,i.SerializableObject)()],l);let p=class StereoVideoFrame extends l{};p=(0,o.__decorate)([(0,i.SerializableObject)()],p);let _=class DepthImageFrame extends u{};(0,o.__decorate)([(0,i.SerializableMember)(),(0,o.__metadata)("design:type",Object)],_.prototype,"depth",void 0),_=(0,o.__decorate)([(0,i.SerializableObject)()],_);let h=class DepthVideoFrame extends _{};h=(0,o.__decorate)([(0,i.SerializableObject)()],h)},655:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__assign:()=>s,__asyncDelegator:()=>v,__asyncGenerator:()=>S,__asyncValues:()=>w,__await:()=>b,__awaiter:()=>d,__classPrivateFieldGet:()=>x,__classPrivateFieldIn:()=>N,__classPrivateFieldSet:()=>j,__createBinding:()=>p,__decorate:()=>n,__exportStar:()=>_,__extends:()=>i,__generator:()=>l,__importDefault:()=>I,__importStar:()=>C,__makeTemplateObject:()=>P,__metadata:()=>u,__param:()=>c,__read:()=>m,__rest:()=>a,__spread:()=>f,__spreadArray:()=>y,__spreadArrays:()=>g,__values:()=>h});var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},o(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return s=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)};function a(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(r[o[i]]=e[o[i]])}return r}function n(e,t,r,o){var i,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var n=e.length-1;n>=0;n--)(i=e[n])&&(a=(s<3?i(a):s>3?i(t,r,a):i(t,r))||a);return s>3&&a&&Object.defineProperty(t,r,a),a}function c(e,t){return function(r,o){t(r,o,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function d(e,t,r,o){return new(r||(r=Promise))((function(i,s){function a(e){try{c(o.next(e))}catch(e){s(e)}}function n(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,n)}c((o=o.apply(e,t||[])).next())}))}function l(e,t){var r,o,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function n(s){return function(n){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,n])}}}var p=Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]};function _(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||p(t,e,r)}function h(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],o=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,i,s=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=s.next()).done;)a.push(o.value)}catch(e){i={error:e}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return a}function f(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e}function g(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var o=Array(e),i=0;for(t=0;t<r;t++)for(var s=arguments[t],a=0,n=s.length;a<n;a++,i++)o[i]=s[a];return o}function y(e,t,r){if(r||2===arguments.length)for(var o,i=0,s=t.length;i<s;i++)!o&&i in t||(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return e.concat(o||Array.prototype.slice.call(t))}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function S(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,i=r.apply(e,t||[]),s=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(e){i[e]&&(o[e]=function(t){return new Promise((function(r,o){s.push([e,t,r,o])>1||n(e,t)}))})}function n(e,t){try{(r=i[e](t)).value instanceof b?Promise.resolve(r.value.v).then(c,u):d(s[0][2],r)}catch(e){d(s[0][3],e)}var r}function c(e){n("next",e)}function u(e){n("throw",e)}function d(e,t){e(t),s.shift(),s.length&&n(s[0][0],s[0][1])}}function v(e){var t,r;return t={},o("next"),o("throw",(function(e){throw e})),o("return"),t[Symbol.iterator]=function(){return this},t;function o(o,i){t[o]=e[o]?function(t){return(r=!r)?{value:b(e[o](t)),done:"return"===o}:i?i(t):t}:i}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=h(e),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(r){t[r]=e[r]&&function(t){return new Promise((function(o,i){(function(e,t,r,o){Promise.resolve(o).then((function(t){e({value:t,done:r})}),t)})(o,i,(t=e[r](t)).done,t.value)}))}}}function P(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var O=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&p(t,e,r);return O(t,e),t}function I(e){return e&&e.__esModule?e:{default:e}}function x(e,t,r,o){if("a"===r&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?o:"a"===r?o.call(e):o?o.value:t.get(e)}function j(e,t,r,o,i){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?i.call(e,r):i?i.value=r:t.set(e,r),r}function N(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}},0:e=>{"use strict";e.exports=t},70:t=>{"use strict";t.exports=e},174:()=>{},685:()=>{},148:()=>{},761:()=>{}},o={};function i(e){var t=o[e];if(void 0!==t)return t.exports;var s=o[e]={exports:{}};return r[e](s,s.exports,i),s.exports}return i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i(915)})()));
//# sourceMappingURL=openhps-opencv.external.min.js.map